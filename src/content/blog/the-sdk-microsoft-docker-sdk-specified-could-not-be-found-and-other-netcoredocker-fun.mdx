---
title: "The SDK 'Microsoft.Docker.Sdk' specified could not be found and other .NET Core/Docker fun..."Microsoft.Docker.Sdk' specified could not be found and other .NET Core/Docker fun..."Microsoft.Docker.Sdk' specified could not be found and other .NET Core/Docker fun..."
date: '2017-11-07'
excerpt: ''
tags: ['.NET', 'DevOps', 'Visual Studio']
readingTime: 4
legacy: true
originalUrl: 'https://simonlambcodesblog.wordpress.com/2017/11/07/the-sdk-microsoft-docker-sdk-specified-could-not-be-found-and-other-netcoredocker-fun/'
---

# The SDK 'Microsoft.Docker.Sdk' specified could not be found and other .NET Core/Docker fun...

This is a brief post because it's the second time I've had to resolve the same issue and as I don't think my memory is getting any better, it's probably better this goes down on my permanent record. ;-) I love those rabbit holes that you don't see coming until too late. I had offered to assist with some Docker investigations for another Technical Evangelist at Microsoft.
In order to do that I needed to take a currently functional ASP.NET Core site and add docker support. So easy... Right click to win... ![The Sdk Microsoft Docker Sdk Specified Could Not Be Found And Other Netcoredocker Fun](/images/blog/the-sdk-microsoft-docker-sdk-specified-could-not-be-found-and-other-netcoredocker-fun-1758985196416-0.jpg) After Visual Studio added the DockerFile and the Docker-Compose scripts, I clicked on the Continuous Delivery Extension and configured the release to deploy using an Azure App Service for Linux. The resulting build would submit a Docker Image to my Azure Container Registry and the Azure App Service for Linux would host this as content.
This approach is really attractive as we benefit from the enhanced DevOps story as well as benefiting from features such as SSL termination and App Settings integration. The extension usually performs a rapid job of created the App Service, generated a .NET Core build and provisioned a release to to the App Service.

> 2017-11-07T08:01:53.4574767Z Creating network "devrisecontainer_default" with the default driver
>
> 2017-11-07T08:01:53.5054822Z HNS failed with error : The parameter is incorrect.
>
> 2017-11-07T08:01:53.5434806Z ##\Creating network "devrisecontainer_default" with the default driver

After a bit of messing around I figured out the agent was configured to _**VS2017**_ so I set it back to _**Hosted Linux Preview**_ and kicked off the build again. ![The Sdk Microsoft Docker Sdk Specified Could Not Be Found And Other Netcoredocker Fun](/images/blog/the-sdk-microsoft-docker-sdk-specified-could-not-be-found-and-other-netcoredocker-fun-1758985196443-1.jpg) The build failed again with a different error:

> Creating network "devrisecontainer_default" with the default driver
>
> 2017-11-07T07:32:17.4058490Z Pulling ci-build (microsoft/aspnetcore-build:1.0-1.1)...
>
> 2017-11-07T07:32:20.2100030Z 1.0-1.1: Pulling from microsoft/aspnetcore-build
>
> 2017-11-07T07:33:43.1627390Z Digest: sha256:552e6960be0568f0932536292402753595b8891fe88cf1d4d4a79893fc280626
>
> 2017-11-07T07:33:43.1836080Z Status: Downloaded newer image for microsoft/aspnetcore-build:1.0-1.1
>
> _2017-11-07T07:33:43.1941150Z Creating devrisecontainer_ci-build_1 ..._
>
> \_/usr/share/dotnet/sdk/1.1.4/Sdks/Microsoft.NET.Sdk/build/Microsoft.NET.TargetFrameworkInference.targets(112,5): error : The current .NET SDK does not support targeting .NET Core 2.0. Either target .NET Core 1.1 or lower, or use a version of the .NET SDK that supports .NET Core 2.0. \_
>
> 2017-11-07T07:34:05.9935840Z \[36mdevrisecontainer_ci-build_1 exited with code 1
>
> 2017-11-07T07:34:06.0031290Z \[0mAborting on container exit...
>
> 2017-11-07T07:34:06.0478380Z ##\Creating network "devrisecontainer_default" with the default driver

As my ASP.NET Core project was targeting version 2.0, the line above rightly indicated that the image being chosen for the build was incorrect. I searched through the code for the image being specified (_**microsoft/aspnetcore-build:1.0-1.1**_) and found it in the _**docker-compose.ci.build.yml**_ file. I updated the image value to _**microsoft/aspnetcore:2.0**_ and restarted the build.

I received another error:

> 2017-11-07T08:06:17.1518550Z Status: Downloaded newer image for microsoft/aspnetcore:2.0
>
> 2017-11-07T08:06:17.1637510Z Creating devrisecontainer_ci-build_1 ...
>
> 2017-11-07T08:06:17.8816870Z \[36mci-build_1 |\[0m Did you mean to run dotnet SDK commands? Please install dotnet SDK from:
>
> 2017-11-07T08:06:17.8858550Z \[36mci-build_1 |\[0m http://go.microsoft.com/fwlink/?LinkID=798306&clcid=0x409
>
> 2017-11-07T08:06:18.1457110Z \[36mdevrisecontainer_ci-build_1 exited with code 145
>
> 2017-11-07T08:06:18.1593110Z \[0mAborting on container exit...
>
> 2017-11-07T08:06:18.2085250Z ##\Creating network "devrisecontainer_default" with the default driver
>
> 2017-11-07T08:06:18.2155070Z ##\Pulling ci-build (microsoft/aspnetcore:2.0)...
>
> 2017-11-07T08:06:18.2231220Z ##\Creating devrisecontainer_ci-build_1 ...

The lines in the middle were being reported because the image I had specified [only contained the run-time](https://hub.docker.com/r/microsoft/aspnetcore/) and wasn't suitable for building ASP.NET Core applications. I updated the image to _**microsoft/aspnetcore-build:2.0**_ and queued another build.

To my frustration it failed again with an error that looked almost identical to one we had just resolved.

> 2017-11-07T08:18:20.6302930Z \[36mci-build_1 |\[0m /src/docker-compose.dcproj : error MSB4236: The SDK 'Microsoft.Docker.Sdk' specified could not be found.
>
> 2017-11-07T08:18:27.9507650Z \[36mci-build_1 |\[0m DevRise -> /src/DevRiseContainer/bin/Release/netcoreapp2.0/DevRise.dll
>
> 2017-11-07T08:18:32.4244890Z \[36mci-build_1 |\[0m DevRise -> /src/DevRiseContainer/obj/Docker/publish/
>
> 2017-11-07T08:18:33.0920570Z \[36mdevrisecontainer_ci-build_1 exited with code 1
>
> 2017-11-07T08:18:33.1045510Z \[0mAborting on container exit...
>
> 2017-11-07T08:18:33.1606200Z ##\Creating network "devrisecontainer_default" with the default driver

Some further research found that this is the result of a [known issue](https://github.com/aspnet/aspnet-docker/issues/299) in the command-line tooling. I simply had to update the image one last time to a custom image, _**microsoft/aspnetcore-build:1.0-2.0**_ that the .NET Core team had created to enable the CI build with Visual Studio.

![The Sdk Microsoft Docker Sdk Specified Could Not Be Found And Other Netcoredocker Fun](/images/blog/the-sdk-microsoft-docker-sdk-specified-could-not-be-found-and-other-netcoredocker-fun-1758985196474-2.jpg)

With a successful build, the continuous deployment then fired and configured our App Service for Linux to point at the delivered container in the Azure Container Registry.

![The Sdk Microsoft Docker Sdk Specified Could Not Be Found And Other Netcoredocker Fun](/images/blog/the-sdk-microsoft-docker-sdk-specified-could-not-be-found-and-other-netcoredocker-fun-1758985196499-3.jpg)

I find it really interesting that these kind of posts are the ones that readers will hit the most. I just hope this post finds people with the same issues I had so you can get back to creating value instead of tricking your tools into working.
